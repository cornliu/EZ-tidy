{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\web\\\\Web2020-FinalProject\\\\frontend\\\\src\\\\components\\\\ShelfGrid.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { Typography, Fab, Divider, Box, Tabs, Tab, Tooltip } from '@material-ui/core';\nimport { AddItemDialog } from './AddItem';\nimport { deleteItems, returnItemToServer } from '../Connection';\nimport { Add, ArrowBack, Delete, DoubleArrow } from '@material-ui/icons';\nimport { AuthContext } from '../contexts';\nimport { useSnackbar } from 'notistack';\nconst useStyles = makeStyles(theme => ({\n  title: {\n    padding: theme.spacing(6),\n    paddingBottom: theme.spacing(1)\n  },\n  root: {\n    padding: theme.spacing(4),\n    paddingTop: theme.spacing(2),\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"left\",\n    height: \"100%\",\n    '& > *': {\n      margin: theme.spacing(1),\n      width: theme.spacing(16),\n      height: theme.spacing(16)\n    }\n  },\n  tabs: {\n    width: \"100%\",\n    height: \"auto\"\n  },\n  fabs: {\n    position: 'fixed',\n    display: \"flex\",\n    flexDirection: \"column\",\n    bottom: theme.spacing(3),\n    right: theme.spacing(3),\n    width: \"auto\",\n    height: \"auto\"\n  },\n  fab: {\n    margin: theme.spacing(1)\n  }\n}));\nexport function ShelfGrid(props) {\n  _s();\n\n  const classes = useStyles();\n  let pageData = props.pageData;\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [dialogRef, setDialogRef] = useState(null);\n  const [privateSelection, setPrivateSelection] = useState([]);\n  const [commonSelection, setCommonSelection] = useState([]);\n  const auth = useContext(AuthContext);\n  const [tabChoise, setTabChoise] = useState(\"private\");\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const columns = [{\n    field: 'name',\n    headerName: 'Name',\n    flex: 1\n  }, {\n    field: 'owner',\n    headerName: 'Owner',\n    flex: 1\n  }, {\n    field: 'time',\n    headerName: 'Time',\n    type: 'dateTime',\n    width: 150\n  }, {\n    field: 'description',\n    headerName: 'Description',\n    sortable: false,\n    flex: 3.5\n  } // { field: 'id', headerName: 'ID', width: 70, description: 'Unique id for each item' },\n  ];\n  const commonitemcolumns = [{\n    field: 'name',\n    headerName: 'Name',\n    flex: 1\n  }, {\n    field: 'owner',\n    headerName: 'Owner',\n    flex: 1\n  }, {\n    field: 'borrower',\n    headerName: 'Borrower',\n    flex: 1\n  }, {\n    field: 'time',\n    headerName: 'Time',\n    type: 'dateTime',\n    width: 150\n  }, {\n    field: 'description',\n    headerName: 'Description',\n    sortable: false,\n    flex: 2.5\n  } // { field: 'id', headerName: 'ID', width: 70, description: 'Unique id for each item' },\n  ];\n\n  const getData = async () => {\n    props.setData(await props.getData(props.path));\n    console.log(pageData);\n  };\n\n  const handlePrivateDelete = async () => {\n    const req = {\n      path: props.path,\n      itemlist: privateSelection,\n      username: auth.name,\n      identity: auth.identity\n    };\n    console.log(req);\n    const {\n      data,\n      status\n    } = await deleteItems(req);\n    enqueueSnackbar(data, {\n      variant: status\n    });\n    props.getData();\n  };\n\n  const handleCommonDelete = async () => {\n    const req = {\n      path: props.path,\n      itemlist: commonSelection,\n      username: auth.name,\n      identity: auth.identity\n    };\n    console.log(req);\n    const {\n      data,\n      status\n    } = await deleteItems(req);\n    enqueueSnackbar(data, {\n      variant: status\n    });\n    props.getData();\n  };\n\n  const handleBorrow = async () => {\n    const req = {\n      path: props.path,\n      itemlist: commonSelection,\n      username: auth.name,\n      identity: auth.identity\n    };\n    console.log(req);\n    const {\n      data,\n      status\n    } = await deleteItems(req);\n    enqueueSnackbar(data, {\n      variant: status\n    });\n    props.getData();\n  };\n\n  const handleReturn = async () => {\n    const req = {\n      path: props.path,\n      id: commonSelection[0],\n      username: auth.name,\n      identity: auth.identity\n    };\n    console.log(req);\n    const {\n      data,\n      status\n    } = await returnItemToServer(req);\n    enqueueSnackbar(data, {\n      variant: status\n    });\n    props.getData();\n  };\n\n  useEffect(() => {\n    props.getData();\n  }, [props.path, dialogOpen]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      className: classes.title,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h3\",\n        align: \"left\",\n        children: pageData.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        paragraph: true,\n        align: \"left\",\n        gutterBottom: true,\n        children: pageData.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddItemDialog, {\n        onClose: () => {\n          setDialogOpen(false);\n        },\n        open: dialogOpen,\n        currentPath: pageData.path\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Tabs, {\n        value: tabChoise,\n        className: classes.tabs,\n        onChange: (event, newValue) => setTabChoise(newValue),\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          label: \"Private Items\",\n          value: \"private\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          label: \"Common Items\",\n          value: \"common\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), tabChoise === \"private\" ? /*#__PURE__*/_jsxDEV(DataGrid, {\n        rows: pageData.itemlist,\n        columns: columns,\n        checkboxSelection: true,\n        autoHeight: true,\n        onSelectionChange: newSelection => {\n          setPrivateSelection(newSelection.rowIds);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(DataGrid, {\n        rows: pageData.commonitemlist,\n        columns: commonitemcolumns,\n        checkboxSelection: false,\n        autoHeight: true,\n        onSelectionChange: newSelection => {\n          setCommonSelection(newSelection.rowIds);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), tabChoise === \"private\" ? /*#__PURE__*/_jsxDEV(Box, {\n      className: classes.fabs,\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"Add a item\",\n        children: /*#__PURE__*/_jsxDEV(Fab, {\n          onClick: () => {\n            setDialogOpen(true);\n          },\n          className: classes.fab,\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"Remove\",\n        children: /*#__PURE__*/_jsxDEV(Fab, {\n          onClick: handlePrivateDelete,\n          className: classes.fab,\n          color: \"secondary\",\n          disabled: !privateSelection.length,\n          children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Box, {\n      className: classes.fabs,\n      children: [auth.identity === \"Admin\" && /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"Add a common item\",\n        children: /*#__PURE__*/_jsxDEV(Fab, {\n          onClick: () => {\n            setDialogOpen(true);\n          },\n          className: classes.fab,\n          color: \"primary\",\n          children: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 15\n      }, this), auth.identity === \"Admin\" && /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"Remove Selected\",\n        children: /*#__PURE__*/_jsxDEV(Fab, {\n          onClick: handleCommonDelete,\n          className: classes.fab,\n          color: \"secondary\",\n          disabled: !commonSelection.length,\n          children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 15\n      }, this), auth.identity !== \"Admin\" && /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"Borrow Selected\",\n        children: /*#__PURE__*/_jsxDEV(Fab, {\n          onClick: handleBorrow,\n          className: classes.fab,\n          color: \"secondary\",\n          disabled: !commonSelection.length,\n          children: /*#__PURE__*/_jsxDEV(DoubleArrow, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"Return Selected\",\n        children: /*#__PURE__*/_jsxDEV(Fab, {\n          onClick: handleReturn,\n          className: classes.fab,\n          color: \"primary\",\n          disabled: !commonSelection.length,\n          children: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ShelfGrid, \"NHH0kllIwcNPVnfaU4KUxS6PF+8=\", false, function () {\n  return [useStyles, useSnackbar];\n});\n\n_c = ShelfGrid;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShelfGrid\");","map":{"version":3,"sources":["C:/web/Web2020-FinalProject/frontend/src/components/ShelfGrid.js"],"names":["React","useContext","useEffect","useState","makeStyles","DataGrid","Typography","Fab","Divider","Box","Tabs","Tab","Tooltip","AddItemDialog","deleteItems","returnItemToServer","Add","ArrowBack","Delete","DoubleArrow","AuthContext","useSnackbar","useStyles","theme","title","padding","spacing","paddingBottom","root","paddingTop","display","flexDirection","justifyContent","height","margin","width","tabs","fabs","position","bottom","right","fab","ShelfGrid","props","classes","pageData","dialogOpen","setDialogOpen","dialogRef","setDialogRef","privateSelection","setPrivateSelection","commonSelection","setCommonSelection","auth","tabChoise","setTabChoise","enqueueSnackbar","columns","field","headerName","flex","type","sortable","commonitemcolumns","getData","setData","path","console","log","handlePrivateDelete","req","itemlist","username","name","identity","data","status","variant","handleCommonDelete","handleBorrow","handleReturn","id","description","event","newValue","newSelection","rowIds","commonitemlist","length"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { DataGrid } from '@material-ui/data-grid'\r\nimport {\r\n  Typography, Fab, Divider, Box, Tabs, Tab, Tooltip\r\n} from '@material-ui/core'\r\nimport { AddItemDialog } from './AddItem';\r\nimport { deleteItems, returnItemToServer } from '../Connection';\r\nimport { Add, ArrowBack, Delete, DoubleArrow } from '@material-ui/icons';\r\nimport { AuthContext } from '../contexts';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    padding: theme.spacing(6),\r\n    paddingBottom: theme.spacing(1),\r\n  },\r\n  root: {\r\n    padding: theme.spacing(4),\r\n    paddingTop: theme.spacing(2),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"left\",\r\n    height: \"100%\",\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: theme.spacing(16),\r\n      height: theme.spacing(16),\r\n    },\r\n  },\r\n  tabs: {\r\n    width: \"100%\",\r\n    height: \"auto\",\r\n  },\r\n  fabs: {\r\n    position: 'fixed',\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    bottom: theme.spacing(3),\r\n    right: theme.spacing(3),\r\n    width: \"auto\",\r\n    height: \"auto\",\r\n  },\r\n  fab: {\r\n    margin: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nexport function ShelfGrid(props) {\r\n  const classes = useStyles();\r\n  let pageData = props.pageData;\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [dialogRef, setDialogRef] = useState(null);\r\n  const [privateSelection, setPrivateSelection] = useState([])\r\n  const [commonSelection, setCommonSelection] = useState([])\r\n  const auth = useContext(AuthContext);\r\n  const [tabChoise, setTabChoise] = useState(\"private\")\r\n  const { enqueueSnackbar } = useSnackbar()\r\n\r\n  const columns = [\r\n    { field: 'name', headerName: 'Name', flex: 1 },\r\n    { field: 'owner', headerName: 'Owner', flex: 1 },\r\n    {\r\n      field: 'time',\r\n      headerName: 'Time',\r\n      type: 'dateTime',\r\n      width: 150,\r\n    },\r\n    {\r\n      field: 'description',\r\n      headerName: 'Description',\r\n      sortable: false,\r\n      flex: 3.5,\r\n    },\r\n    // { field: 'id', headerName: 'ID', width: 70, description: 'Unique id for each item' },\r\n  ];\r\n\r\n  const commonitemcolumns = [\r\n    { field: 'name', headerName: 'Name', flex: 1 },\r\n    { field: 'owner', headerName: 'Owner', flex: 1 },\r\n    {\r\n      field: 'borrower',\r\n      headerName: 'Borrower',\r\n      flex: 1,\r\n    },\r\n    {\r\n      field: 'time',\r\n      headerName: 'Time',\r\n      type: 'dateTime',\r\n      width: 150,\r\n    },\r\n    {\r\n      field: 'description',\r\n      headerName: 'Description',\r\n      sortable: false,\r\n      flex: 2.5,\r\n    },\r\n    // { field: 'id', headerName: 'ID', width: 70, description: 'Unique id for each item' },\r\n  ];\r\n\r\n\r\n  const getData = async () => {\r\n    props.setData(await props.getData(props.path));\r\n    console.log(pageData);\r\n  }\r\n\r\n  const handlePrivateDelete = async () => {\r\n    const req = {\r\n      path: props.path,\r\n      itemlist: privateSelection,\r\n      username: auth.name,\r\n      identity: auth.identity\r\n    }\r\n    console.log(req);\r\n    const { data, status } = await deleteItems(req);\r\n    enqueueSnackbar(data, { variant: status });\r\n    props.getData();\r\n  }\r\n  const handleCommonDelete = async () => {\r\n    const req = {\r\n      path: props.path,\r\n      itemlist: commonSelection,\r\n      username: auth.name,\r\n      identity: auth.identity\r\n    }\r\n    console.log(req);\r\n    const { data, status } = await deleteItems(req);\r\n    enqueueSnackbar(data, { variant: status });\r\n    props.getData();\r\n  }\r\n\r\n  const handleBorrow = async () => {\r\n    const req = {\r\n      path: props.path,\r\n      itemlist: commonSelection,\r\n      username: auth.name,\r\n      identity: auth.identity\r\n    }\r\n    console.log(req);\r\n    const { data, status } = await deleteItems(req);\r\n    enqueueSnackbar(data, { variant: status });\r\n    props.getData();\r\n  }\r\n  const handleReturn = async () => {\r\n    const req = {\r\n      path: props.path,\r\n      id: commonSelection[0],\r\n      username: auth.name,\r\n      identity: auth.identity\r\n    }\r\n    console.log(req);\r\n    const { data, status } = await returnItemToServer(req);\r\n    enqueueSnackbar(data, { variant: status });\r\n    props.getData();\r\n  }\r\n\r\n  useEffect(() => {\r\n    props.getData();\r\n  }, [props.path, dialogOpen])\r\n\r\n  return (\r\n    <div>\r\n      <Box className={classes.title}>\r\n        <Typography variant=\"h3\" align='left' >{pageData.title}</Typography>\r\n        <Typography paragraph align='left' gutterBottom >{pageData.description}</Typography>\r\n        <AddItemDialog\r\n          onClose={() => { setDialogOpen(false) }}\r\n          open={dialogOpen}\r\n          currentPath={pageData.path} />\r\n      </Box>\r\n      <Divider />\r\n      <Box className={classes.root}>\r\n        <Tabs value={tabChoise} className={classes.tabs}\r\n          onChange={(event, newValue) => setTabChoise(newValue)} >\r\n          <Tab label=\"Private Items\" value=\"private\" />\r\n          <Tab label=\"Common Items\" value=\"common\" />\r\n        </Tabs>\r\n        {tabChoise === \"private\" ? (\r\n          <DataGrid\r\n            rows={pageData.itemlist}\r\n            columns={columns}\r\n            checkboxSelection\r\n            autoHeight\r\n            onSelectionChange={(newSelection) => {\r\n              setPrivateSelection(newSelection.rowIds);\r\n            }} />\r\n        ) : (\r\n            <DataGrid\r\n              rows={pageData.commonitemlist}\r\n              columns={commonitemcolumns}\r\n              checkboxSelection={false}\r\n              autoHeight\r\n              onSelectionChange={(newSelection) => {\r\n                setCommonSelection(newSelection.rowIds);\r\n              }} />\r\n          )}\r\n      </Box>\r\n      {tabChoise === \"private\" ? (\r\n        <Box className={classes.fabs}>\r\n          <Tooltip title=\"Add a item\">\r\n            <Fab onClick={() => { setDialogOpen(true) }} className={classes.fab} color=\"primary\" >\r\n              <Add />\r\n            </Fab>\r\n          </Tooltip>\r\n          <Tooltip title=\"Remove\">\r\n            <Fab onClick={handlePrivateDelete} className={classes.fab} color=\"secondary\" disabled={!privateSelection.length} >\r\n              <Delete />\r\n            </Fab>\r\n          </Tooltip>\r\n        </Box>\r\n      ) : (\r\n          <Box className={classes.fabs}>\r\n            {auth.identity === \"Admin\" && (\r\n              <Tooltip title=\"Add a common item\">\r\n                <Fab onClick={() => { setDialogOpen(true) }} className={classes.fab} color=\"primary\" >\r\n                  <Add />\r\n                </Fab>\r\n              </Tooltip>\r\n            )}\r\n            {auth.identity === \"Admin\" && (\r\n              <Tooltip title=\"Remove Selected\">\r\n                <Fab onClick={handleCommonDelete} className={classes.fab} color=\"secondary\" disabled={!commonSelection.length} >\r\n                  <Delete />\r\n                </Fab>\r\n              </Tooltip>\r\n            )}\r\n            {auth.identity !== \"Admin\" && (\r\n              <Tooltip title=\"Borrow Selected\">\r\n                <Fab onClick={handleBorrow} className={classes.fab} color=\"secondary\" disabled={!commonSelection.length} >\r\n                  <DoubleArrow />\r\n                </Fab>\r\n              </Tooltip>\r\n            )}\r\n            <Tooltip title=\"Return Selected\" >\r\n              <Fab onClick={handleReturn} className={classes.fab} color=\"primary\" disabled={!commonSelection.length} >\r\n                <ArrowBack />\r\n              </Fab>\r\n            </Tooltip>\r\n          </Box>\r\n\r\n        )}\r\n    </div>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}